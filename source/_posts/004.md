---
title: ssh远程连接服务器
date: 2021-09-21 16:59:39
tags:
  - [windows terminal]
  - [ssh]
categories:
  - [搭建环境]

---
​	本文简单介绍ssh远程连接实验室服务器的步骤，踩坑许多，很多原理依旧不懂，但最后实现:
- 连接实验室网络后内网连接远程服务器功能
- 配置本地密钥和远程服务器用户密钥使其免密钥功能
- 2021/09/25更新：实现外网连接实验室服务器的功能

##### 1.实现远程连接服务器

###### 	1.本地服务准备

本地主机上打开windows terminal窗口(现在的windows一般会自动安装openSSH客户端和服务端),执行命令：

```none
ssh -keygen -t rsa
```

执行命令后会在`.ssh`文件下生成两个密钥，`id_rsa`和`id_rsa.pub`一个私钥一个公钥;实现远程连接服务器关键是把**公钥**存放到远程服务器端

###### 2.配置本地config文件

###### 3.将本地公钥上传至服务器

在windows terminal下执行命令

```none
scp C:\Users\VrShadow\.ssh\id_rsa.pub XXX@192.168.0.75:\home\xxx\
```

本地公钥拷贝至远程服务器[注意xxx更改为自己在远程服务器端分配的用户名！！！],此时传过来的公钥存在`./home/xxx`下

###### 4.公钥写入授权文件

在远程服务器上执行命令

```none
touch ./ssh/authorized_keys
```

远程服务器端这边用的是linux系统，所以先要创建文件`authorized_keys`

将本地传过来的密钥**写入authorizd_keys**中

```none
cat ./home/xxx/id_rsa.pub >> ./.ssh/authorized_keys
```

##### 2.vscode免密登录

###### 1.准备插件SSH

在插件里搜索安装即可

###### 2.修改本地config配置文件

本地config文件里面加入**”IdentifyFile” ”C:\Users\VrShadow\.ssh\id_rsa”**

完成之后侧边导航栏会出现远程资源管理器图标，点击之后选择远程服务器时对应的端口下的分支用户，点击就会开启新的窗口(第一次会让你选择远程服务器的操作系统)，之后就会进入对应用户下的目录进行工作。

##### 3.外网远程连接

自己的本地用户`.ssh`文件里面已经配置了**config**文件，已经配置了jump内网权限
命令行执行：

```none
ssh jumpnone
```

执行后需要远程服务器的密码：********

输入密码后进行远程连接操作

```none
ssh username@远程服务器ip地址
```

我写的比较粗糙,(偷个懒)可以参考我朋友的blog：

> [朋友的博客](!https://lry89757.github.io/2021/09/24/linux-bi-ji/)

